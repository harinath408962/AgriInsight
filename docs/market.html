<!DOCTYPE html>
<html>
  <head>
    <title>AgriInsight – Market Advisory</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/market.css" />

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 1100px;
        margin: auto;
      }

      h2 {
        margin-bottom: 5px;
      }

      .subtitle {
        font-size: 14px;
        color: #555;
        margin-bottom: 20px;
      }

      /* CONTROLS */
      .controls {
        display: flex;
        gap: 10px;
        align-items: center;
        margin: 15px 0 25px;
      }

      .controls select,
      .controls button {
        padding: 6px 10px;
      }

      /* INSIGHT CARD */
      .decision-card {
        background: #f0f9ff;
        border-left: 6px solid #0284c7;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 30px;
      }

      /* CHART */
      .chart-section {
        margin-bottom: 30px;
      }

      .chart-box {
        height: 400px;
      }

      /* TABLE */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
      }

      th,
      td {
        border: 1px solid #e5e7eb;
        padding: 8px;
        font-size: 13px;
        text-align: left;
      }

      th {
        background: #f8fafc;
      }
    </style>
  </head>

  <body>
    <h2>Market Dashboard</h2>
    <div class="subtitle">
      Compare mandi prices across markets to support selling and holding decisions.
    </div>

    <!-- CONTROLS (TOP) -->
    <div class="controls">
      <select id="state">
        <option value="">Select State</option>
        <option>Karnataka</option>
        <option>West Bengal</option>
        <option>Maharashtra</option>
        <option>Andhra Pradesh</option>
        <option>Telangana</option>
        <option>Tamil Nadu</option>
        <option>Kerala</option>
        <option>Uttar Pradesh</option>
      </select>

      <select id="crop">
        <option value="">Select Crop</option>
        <option>Tomato</option>
        <option>Potato</option>
        <option>Onion</option>
        <option>Green Chilli</option>
        <option>Brinjal</option>
      </select>

      <select id="sort">
        <option value="desc">Price: High → Low</option>
        <option value="asc">Price: Low → High</option>
      </select>

      <button onclick="loadMarket()">Apply</button>
    </div>

    <!-- INSIGHTS -->
    <div id="insights" class="decision-card">
      Select state and crop to view market insights.
    </div>

    <!-- GRAPH -->
    <div class="chart-section">
      <h3>Market Price Comparison</h3>
      <p class="subtitle">
        Visual comparison of modal prices across selected mandis.
      </p>

      <div class="chart-box">
        <canvas id="marketChart"></canvas>
      </div>
    </div>

    <!-- TABLE -->
    <h3>Market Price Table</h3>
    <p class="subtitle">
      Detailed mandi-wise pricing information for the selected crop.
    </p>

    <table id="marketTable">
      <thead>
        <tr>
          <th>Market Name</th>
          <th>District</th>
          <th>Market Price (₹)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script src="js/market-v2.js"></script>
  </body>
</html>
